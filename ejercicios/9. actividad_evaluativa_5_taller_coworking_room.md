# Taller — **CoworkingRoom (reserva de sala única)**

## Objetivo
Administrar la **reserva de una única sala** de coworking por franjas de 15′, con recordatorios y consulta de disponibilidad diaria. Fechas/horas como **strings**.

## Funcionalidades
- Agregar **reservas**: `id`, `team`, `purpose`, `date_`, `start_at`, `end_at`.
- Agregar/eliminar **recordatorios**.
- Ver **slots libres** del día.

## Convenciones
- `date_`: `"YYYY-MM-DD"`. `start_at`/`end_at`: `"HH:MM"` (24h).  
- Slots cada **15′**; intervalo **[start_at, end_at)**.

## Clases
1) `Reminder` (**dataclass**)  
   - `EMAIL="email"`, `SYSTEM="system"`; `when: str`, `type: str = EMAIL`.  
   - `__str__` → `"Reminder on {when} of type {type}"`.

2) `Booking` (**dataclass**)  
   - `id: str`, `team: str`, `purpose: str`, `date_: str`, `start_at: str`, `end_at: str`.  
   - `reminders: list[Reminder] = field(default_factory=list)`.  
   - `add_reminder(when, type_)`, `delete_reminder(index)`, `__str__` (4 líneas):
     ```
     ID: {id}
     Event title: {team}
     Description: {purpose}
     Time: {start_at} - {end_at}
     ```

3) `DayRoom` (clase normal)  
   - `date_: str`, `slots: dict[str, str | None]`.  
   - `__init__` → `_init_slots()`; `add_booking(booking_id, start_at, end_at)` con colisión → `ValueError("Slot no disponible")`.

4) `RoomCalendar` (clase normal)  
   - `days: dict[str, DayRoom]`, `bookings: dict[str, Booking]`.  
   - `add_booking(id, team, purpose, date_, start_at, end_at) -> str` (dup `id` → `ValueError("ID de evento duplicado")`).  
   - `add_reminder(booking_id, when, type_) -> None` (no existe → `ValueError("Evento no encontrado")`).  
   - `find_available_slots(date_: str) -> list[str]`.

---

## Starter — `app/model/room.py` (10 TODOs + pruebas mínimas)

```python
from dataclasses import dataclass, field

# TODO 1: dataclass Reminder (EMAIL/SYSTEM, when, type, __str__)
class Reminder:
    def __str__(self) -> str:
        pass

# TODO 2: dataclass Booking (...)
class Booking:
    # TODO 3: add_reminder(self, when: str, type_: str) -> None
    def add_reminder(self, when: str, type_: str) -> None:
        pass

    # TODO 4: delete_reminder(self, index: int) -> None  # ValueError("Recordatorio no encontrado")
    def delete_reminder(self, index: int) -> None:
        pass

    # TODO 5: __str__ (4 líneas)
    def __str__(self) -> str:
        pass

class DayRoom:
    # TODO 6: __init__(self, date_: str) -> None  # init slots + _init_slots()
    def __init__(self, date_: str) -> None:
        pass

    # TODO 7: _init_slots(self) -> None  # "00:00"... "23:45" -> None
    def _init_slots(self) -> None:
        pass

    # TODO 8: add_booking(self, booking_id: str, start_at: str, end_at: str) -> None
    #   [start_at, end_at), colisión -> ValueError("Slot no disponible")
    def add_booking(self, booking_id: str, start_at: str, end_at: str) -> None:
        pass

class RoomCalendar:
    def __init__(self) -> None:
        pass

    # TODO 9: add_booking(...) -> str  # valida duplicado, crea DayRoom y Booking, delega, guarda, retorna id
    def add_booking(self, id: str, team: str, purpose: str,
                    date_: str, start_at: str, end_at: str) -> str:
        pass

    # TODO 10: a) add_reminder(...) -> None  (no existe -> ValueError("Evento no encontrado"))
    #          b) find_available_slots(date_: str) -> list[str]
    def add_reminder(self, booking_id: str, when: str, type_: str) -> None:
        pass

    def find_available_slots(self, date_: str) -> list[str]:
        pass


# ============================================================
# PRUEBAS MÍNIMAS (descomenta para correr tras completar TODOs)
# ============================================================
# # [CoworkingRoom] Pruebas mínimas

#print("[CoworkingRoom] Pruebas mínimas")

# Reminder.__str__
#r = Reminder()
#r.when = "2025-12-01 08:15"
#r.type = "system"
#print("Reminder.__str__ ->", str(r))
#print("OK: Reminder.__str__")

# Booking add/delete/str
#b = Booking()
#b.id = "B1"
#b.team = "Dev"
#b.purpose = "Sprint Plan"
#b.date_ = "2025-12-01"
#b.start_at = "08:00"
#b.end_at = "08:30"
#b.reminders = []

#b.add_reminder("2025-12-01 07:45", "email")
#print("Reminders después de add_reminder:", len(b.reminders))

# eliminar el recordatorio agregado (índice 0)
#b.delete_reminder(0)
#print("Reminders después de delete_reminder(0):", len(b.reminders))

#lines = str(b).splitlines()
#print("Booking.__str__ (primeras líneas):")
#for i, line in enumerate(lines[:4]):
    #print(f"{i}: {line}")
#print("OK: Booking add/delete/str")

# DayRoom: 96 slots + reservas sin colisión
#d = DayRoom("2025-12-01")
#print("DayRoom slots totales:", len(d.slots))

#d.add_booking("B1", "10:00", "10:30")
#d.add_booking("B2", "10:30", "10:45")
#print("OK: DayRoom reservas sin colisión")

# RoomCalendar: alta, libres y add_reminder
#cal = RoomCalendar()
#cal.add_booking("B9", "Design", "Review", "2025-12-02", "10:00", "10:30")
#libres = cal.find_available_slots("2025-12-02")
#print("Slots libres (muestra):", libres[:10])

#cal.add_booking("B10", "QA", "Sync", "2025-12-02", "11:00", "11:15")
#cal.add_reminder("B9", "2025-12-02 09:30", "email")
#print("Reminders en B9:", len(cal.bookings["B9"].reminders))

#print("Todo OK")

```
