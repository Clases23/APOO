# Caso de Estudio: Plataforma de Eventos

Se quiere construir una aplicación que permita administrar la organización de eventos y la inscripción de participantes a dichos eventos. La plataforma de eventos estará destinada, por ejemplo, a gestionar conferencias, conciertos o talleres, donde los organizadores pueden registrar nuevos eventos y los interesados pueden inscribirse como participantes. La aplicación permitirá llevar un control de los eventos disponibles, registrar la inscripción de participantes, cancelar inscripciones o eventos si es necesario, y consultar información relevante (como el listado de participantes inscritos en un evento o buscar eventos por ciertos criterios).

La plataforma funcionará en línea para múltiples eventos. Los organizadores crean eventos con detalles como fecha, lugar y cupo máximo de asistentes. Luego, los usuarios podrán inscribirse a esos eventos hasta llenar el cupo. Si un evento se cancela, debe quedar registro de esa cancelación y posiblemente notificar a los inscritos.

## De cada evento se conoce

- **Código o ID de evento**: identificador único del evento en la plataforma.
- **Título o nombre del evento**: el nombre descriptivo (por ejemplo, "Concierto de Rock 2025").
- **Fecha y lugar**: información de cuándo y dónde se realizará el evento (fecha, hora de inicio y ubicación).
- **Cupo máximo**: la cantidad máxima de participantes que pueden inscribirse.
- **Participantes inscritos**: la lista de personas (participantes) que se han inscrito para asistir al evento.

## De cada participante se conoce

- **Identificación**: un ID único de participante (por ejemplo, podría ser el email o un número asignado al registrarse en la plataforma).
- **Nombre y contacto**: nombre de la persona y datos de contacto (teléfono, correo electrónico).
- **Inscripciones realizadas**: los eventos a los que esa persona se ha inscrito en la plataforma.

## De cada inscripción a un evento se conoce

- **Evento asociado**: el evento al que corresponde la inscripción.
- **Participante asociado**: la persona que se ha inscrito.
- **Fecha de inscripción**: cuándo se realizó la inscripción.
- **Estado de la inscripción**: activa (vigente) o cancelada.

> **Nota**: En el sistema, la inscripción de un participante se puede modelar como una entidad o registro que vincula a un participante con un evento particular. Un participante puede inscribirse en varios eventos, y cada evento tendrá muchos participantes inscritos, dando lugar a una relación muchos-a-muchos entre participantes y eventos. Cada inscripción es única para un par participante-evento; si se cancela una inscripción, el cupo del evento queda nuevamente disponible para otro interesado.

---

## Comprensión de los Requerimientos

**Registrar un nuevo evento.** Permite a un organizador crear un evento en la plataforma con toda su información (título, fecha, lugar, cupo, etc.). El evento nuevo queda disponible en el sistema para que los participantes puedan inscribirse. No puede haber dos eventos con el mismo identificador, y los datos principales deben ser proporcionados.

**Cancelar un evento existente.** Permite a un organizador eliminar un evento de la plataforma, por ejemplo si el evento se ha pospuesto o cancelado definitivamente. Al cancelar un evento, el sistema deberá anular todas las inscripciones asociadas a ese evento (los participantes inscritos quedan notificados de la cancelación y liberados, pero el registro puede conservarse para historial).

**Inscribir un participante a un evento.** Registra la inscripción (o ticket) de un participante en un evento específico. Dado un evento disponible y los datos de un participante (si es nuevo, primero deberá registrarse como participante en la plataforma), el sistema crea una nueva inscripción. Esta operación aumenta el conteo de participantes inscritos en el evento. Solo se puede realizar la inscripción si el evento no ha alcanzado su cupo máximo de asistentes; si el evento ya está lleno, el sistema deberá impedir nuevas inscripciones.

**Cancelar la inscripción de un participante.** Permite que un participante (o un administrador) anule su registro en un evento antes de que este ocurra. Al cancelar una inscripción, el sistema la marca como cancelada (o la elimina) y disminuye el número de inscritos del evento, liberando un cupo. Esto puede permitir que otro participante se inscriba en lugar del cancelado si hay lista de espera o cupo liberado.

**Consultar la lista de participantes de un evento.** Permite obtener el listado completo de participantes inscritos en un evento determinado, con sus nombres y datos de contacto. Esta funcionalidad es útil para que el organizador pueda, por ejemplo, imprimir una lista de asistencia o contactar a los inscritos con información relevante. Solo mostrará las inscripciones activas (no incluirá aquellas que fueron canceladas).

> (Opcionalmente, el sistema también podría ofrecer buscar eventos por nombre, fecha o categoría, pero nos centraremos en los cinco requerimientos principales arriba.)

### Tabla de Requerimientos Funcionales — Plataforma de Eventos

| Nombre del requisito | Descripción | Entradas | Resultados |
|---|---|---|---|
| R1 - Registrar un nuevo evento | Crear un evento con título, fecha, lugar, cupo, etc., disponible para inscripciones. No se permite ID duplicado. | ID de evento único; título; fecha y lugar (fecha, hora, ubicación); cupo máximo; datos principales. | Evento creado y disponible; inscripciones iniciales vacías/contador en 0; rechazo si ID duplicado o faltan datos. |
| R2 - Cancelar un evento existente | Eliminar o marcar como cancelado un evento y anular sus inscripciones asociadas. | ID del evento. | Evento cancelado/eliminado; inscripciones asociadas anuladas (registro puede conservarse); participantes notificados si aplica. |
| R3 - Inscribir un participante a un evento | Crear una inscripción que vincule participante y evento si hay cupo. | ID del evento; datos del participante (o referencia existente). | Inscripción creada con fecha; se incrementa conteo de inscritos; rechazo si cupo lleno; si participante es nuevo, se registra (según implementación). |
| R4 - Cancelar la inscripción de un participante | Anular una inscripción y liberar un cupo. | ID del evento e ID del participante **o** ID de la inscripción. | Inscripción cancelada o eliminada; decremento del conteo de inscritos; cupo liberado. |
| R5 - Consultar la lista de participantes de un evento | Obtener listado de participantes con inscripciones activas. | ID del evento. | Lista de participantes (nombre y contacto) con inscripciones activas para impresión/consulta. |

---

## Comprensión del Mundo del Problema

En el modelo conceptual del sistema de eventos se identifican cuatro entidades principales:

- **La plataforma de eventos (clase PlataformaEventos)**: representa el sistema que administra múltiples eventos. Contiene la colección de todos los Evento registrados. Opcionalmente, podría contener también un registro global de Participante si la plataforma mantiene cuentas de usuario, pero en este caso manejaremos participantes asociados a inscripciones específicas. La plataforma maneja las operaciones globales como crear o cancelar eventos y coordina las inscripciones.
- **Un evento (clase Evento)**: representa cada evento creado en la plataforma. Tiene atributos como id, título, fecha, lugar y cupo máximo de participantes. Un Evento está asociado con muchas inscripciones de participantes (relación 1 a * con la clase Inscripcion). Podemos llamar a esa asociación "inscripciones" del evento. También, el evento mantiene un contador o lista de participantes inscritos hasta el momento.
- **Un participante (clase Participante)**: representa a una persona inscrita en la plataforma. Tiene datos de identificación y contacto. Un Participante puede estar asociado a muchas inscripciones (relación 1 a * con Inscripcion), dado que una persona puede inscribirse a varios eventos distintos.
- **Una inscripción (clase Inscripcion)**: representa el acto de un participante inscrito en un evento. Es una entidad que vincula un Evento con un Participante en una fecha dada. Cada Inscripcion tiene referencias al evento y al participante, y puede incluir atributos como la fecha de inscripción y estado (activa o cancelada). En el modelo, la inscripción sirve como una clase de asociación entre Evento y Participante para resolver la relación muchos-a-muchos entre ellos. Un evento tiene muchas inscripciones y un participante puede tener muchas inscripciones, pero cada inscripción conecta a un único participante con un único evento.

---

## Análisis y Asignación de Responsabilidades

**Requerimiento 1: Registrar un nuevo evento.** Clases involucradas: PlataformaEventos y Evento. La PlataformaEventos ofrecerá un método como crearEvento(datosEvento) que construye un nuevo objeto Evento con la información proporcionada (título, fecha, cupo, etc.) y lo agrega a su lista de eventos. Antes de agregarlo, debe verificar que el identificador (código) de evento no esté ya en uso en la plataforma. La clase Evento encapsula los detalles de cada evento; al ser creado, inicializa también su estructura de inscripciones vacía (por ejemplo, una lista de tipo Inscripcion, inicialmente sin elementos) y un contador de inscritos en 0. Tras la creación, PlataformaEventos almacena el evento. (Si en el sistema existen distintos organizadores, podría haber una asociación de Evento con un Organizador, pero eso queda fuera del alcance actual).

**Requerimiento 2: Cancelar un evento existente.** Clases involucradas: PlataformaEventos y Evento (y Inscripcion). La PlataformaEventos implementará cancelarEvento(idEvento) que busca el Evento correspondiente en su lista. Si lo encuentra, procede a marcarlo como cancelado o eliminarlo. Antes de remover un evento, el sistema debe gestionar sus inscripciones: por ejemplo, podría notificar a cada Participante inscrito. En términos de implementación, PlataformaEventos recorrería la lista de Inscripcion del evento y, por cada inscripción, podría actualizar su estado a "cancelada" (quizá invocando un método cancelar() en cada objeto Inscripcion) o simplemente eliminar esas inscripciones. La clase Evento podría exponer un método cancelarTodasInscripciones() que la PlataformaEventos utilice para limpiar las inscripciones asociadas. Finalmente, PlataformaEventos quita el evento de la lista de eventos activos. (En un sistema real, podría archivarse el evento cancelado en un histórico, pero para fines de diseño básico asumimos eliminación).

**Requerimiento 3: Inscribir un participante a un evento.** Clases involucradas: PlataformaEventos, Evento, Participante e Inscripcion. La PlataformaEventos tendrá un método inscribirParticipante(idEvento, datosParticipante) o similar. Este método localiza primero el Evento destino. Luego, determina al Participante: si el participante ya existe (por ejemplo, tiene una cuenta en la plataforma), se recupera su objeto; si no existe, podría crear un nuevo objeto Participante con los datos proporcionados y registrarlo (posiblemente manteniendo un registro global de participantes, dependiendo de la implementación). Suponiendo que tenemos el objeto Participante, PlataformaEventos verifica si el evento tiene cupo disponible (por ejemplo, comparando el número actual de inscripciones con el cupo máximo del evento mediante un método Evento.espacioDisponible() o similar). Si hay espacio, la plataforma crea una nueva Inscripcion que asocia al participante con el evento, posiblemente usando un constructor new Inscripcion(participante, evento) que registre la fecha actual como fecha de inscripción. A continuación, PlataformaEventos agrega esa Inscripcion a la lista de inscripciones del Evento (por ejemplo mediante evento.agregarInscripcion(inscripcion)). Esta operación incrementa el conteo de inscritos. Asimismo, si llevamos registro de inscripciones en el Participante, también se agregaría la inscripción a la lista del participante (ejemplo: participante.agregarInscripcion(inscripcion)). Si el evento ya estuviese lleno, el método debe rechazar la inscripción (podría lanzar una excepción o devolver un indicador de error). La clase Evento se encarga de la lógica de agregar la inscripción: su método agregarInscripcion(inscripcion) añadiría la inscripción a su lista interna y quizás incrementaría un contador de inscritos. La clase Participante también tendría un método agregarInscripcion(inscripcion) para guardar la referencia a esa inscripción en su historial.

**Requerimiento 4: Cancelar la inscripción de un participante.** Clases involucradas: PlataformaEventos, Evento, Participante e Inscripcion. La PlataformaEventos proveerá un método cancelarInscripcion(idEvento, idParticipante) o cancelarInscripcion(idInscripcion). Este método localiza el Evento correspondiente y dentro de él busca la Inscripcion que vincula al participante dado. Una vez identificada la inscripción, se procede a cancelarla. Podría hacerse de dos maneras: marcándola como cancelada (cambiando un atributo estado a "cancelada") o eliminándola por completo de la lista de inscripciones del evento. En ambos casos, el Evento deberá actualizar su conteo de inscritos (decrementándolo en 1 si se removió la inscripción). Esto se logra invocando quizás un método evento.removerInscripcion(inscripcion) que elimine el objeto Inscripcion de su colección interna. Asimismo, la PlataformaEventos (o el evento mismo) debe informar al Participante para que también quite esa inscripción de su lista personal (por ejemplo llamando participante.removerInscripcion(inscripcion)). La clase Inscripcion podría tener un método cancelar() para marcar su estado, pero la desvinculación efectiva se realiza a través de las listas en Evento y Participante. En resumen, PlataformaEventos orquesta: encuentra el evento y participante involucrados, y luego delega en Evento y Participante la tarea de remover la inscripción de sus respectivos registros.

**Requerimiento 5: Consultar la lista de participantes de un evento.** Clases involucradas: PlataformaEventos, Evento y Participante (indirectamente Inscripcion). La PlataformaEventos implementará un método obtenerParticipantesDeEvento(idEvento) que devuelve el listado de participantes inscritos en un cierto evento. Internamente, localiza el Evento y luego solicita a ese evento sus inscripciones (por ejemplo mediante evento.getInscripciones()). A partir de la lista de Inscripcion, se puede extraer la referencia a cada Participante inscrito. Por ejemplo, cada objeto Inscripcion podría tener métodos getParticipante() y estaActiva(); la plataforma filtraría solo las inscripciones activas y recopilaría los participantes. Alternativamente, la clase Evento podría mantener directamente una lista de participantes inscritos (además o en lugar de la lista de inscripciones), pero normalmente la lista de inscripciones ya contiene la relación con participantes. En cualquier caso, PlataformaEventos construye un listado de datos de participantes (nombre, contacto, etc.) posiblemente ordenado alfabéticamente o en orden de registro. La clase Evento soporta esto proporcionando acceso a sus inscripciones. La clase Participante simplemente ofrece sus atributos (nombre, contacto) vía getters para conformar la salida. Este requerimiento es principalmente de consulta, así que la responsabilidad está en formatear y presentar la información, mientras que la estructura de datos la provee Evento -> Inscripcion -> Participante.

## Diagrama de clases.
![Diagrama de clases - Almacén de productos](/imagenes/eventos.drawio.svg)

---

# Caso de Estudio: Almacén de Productos (Logística)

Se quiere construir una aplicación que permita administrar el inventario de productos en un almacén logístico. El sistema manejará un catálogo de productos disponibles en el almacén, registrará las operaciones de entrada y salida de mercancías (es decir, cuando llegan nuevas unidades de un producto al almacén o cuando se despachan unidades hacia tiendas o clientes) y permitirá consultas sobre el estado del inventario. El objetivo es tener control sobre cuántas unidades de cada producto hay en stock y llevar un historial de movimientos de inventario.

La aplicación permitirá agregar nuevos productos al catálogo del almacén, eliminar productos que ya no se manejan, registrar ingresos de stock (reabastecimientos) y registrar salidas de stock (despachos o ventas). Adicionalmente, se podrán buscar productos por diferentes criterios para consultar su información y estado actual (por ejemplo, cuántas unidades hay disponibles).

## De cada producto se conoce

- **Código único**: identificador del producto (por ejemplo un código SKU). No pueden existir dos productos con el mismo código en el catálogo.
- **Nombre o descripción**: el nombre del producto (y eventualmente una descripción breve).
- **Cantidad en stock**: la cantidad actual de unidades disponibles en el almacén. Solo debe modificarse cuando ocurren entradas o salidas de ese producto.
- **Precio de costo**: el valor unitario que le cuesta al almacén adquirir una unidad del producto (por ejemplo, precio de compra al proveedor).
- **Precio de venta**: el valor unitario de venta o estimado del producto (usado para calcular el valor de la mercancía salida, etc.).

## De cada movimiento de inventario se conoce

- **Tipo de movimiento**: si es una entrada (ingreso de unidades al stock) o una salida (egreso/venta de unidades).
- **Fecha del movimiento**: cuándo se realizó la operación.
- **Cantidad de unidades involucradas**: cuántas unidades del producto entraron o salieron en esa operación.

> **Nota**: Un movimiento de entrada incrementa el stock de un producto, mientras que un movimiento de salida lo decrementa. Una salida solo se puede registrar si hay suficientes unidades en stock del producto (no se puede dejar la cantidad negativa; es decir, no se pueden despachar más unidades de las que hay disponibles en ese momento).

---

## Comprensión de los Requerimientos

**Registrar un nuevo producto en el catálogo.** Permite dar de alta un producto en el sistema, almacenando su código, nombre y precios. Al crearlo, su cantidad inicial en stock será cero (ya que aún no se ha ingresado mercadería). Si se intenta registrar un código de producto que ya existe, el sistema no lo permitirá.

**Eliminar un producto del catálogo.** Retira un producto de la gestión del almacén. Esta operación suele usarse cuando un producto se descontinúa. Solo se puede eliminar si el producto no tiene stock pendiente (por ejemplo, si la cantidad actual es cero); de lo contrario, habría que ajustar el inventario antes. Al eliminarlo, se borra del catálogo para que ya no aparezca en las consultas ni se puedan registrar más movimientos sobre él.

**Registrar entrada de stock (reabastecimiento).** Registra cuando llegan nuevas existencias de un producto al almacén. Para un producto dado, se incrementa su cantidad actual en stock en el número de unidades recibidas. Asimismo, se crea un movimiento de entrada en el historial de ese producto, guardando la fecha y cantidad ingresada. Por ejemplo, si llegan 100 unidades del producto X, se suma al stock de X y se añade un movimiento "entrada 100 unidades" con la fecha actual.

**Registrar salida de stock (despacho/venta).** Registra cuando se retiran unidades de un producto del almacén, ya sea para enviar a clientes, a tiendas u otras razones. Para un producto dado, se disminuye su cantidad en stock según la cantidad despachada y se crea un movimiento de salida en el historial del producto, con fecha y cantidad. Este movimiento solo puede realizarse si hay stock suficiente del producto: el sistema debe evitar que la cantidad en stock quede negativa. Si se piden 50 unidades pero solo hay 30 en inventario, la operación no se completa (o se ajusta a 30, según reglas de negocio, pero aquí asumimos que se rechaza la salida por falta de stock).

**Buscar un producto por código o nombre.** Permite consultar la información de un producto específico en el catálogo. Ingresando un código de producto o parte de su nombre, el sistema debe localizar el producto correspondiente y mostrar sus datos: nombre, cantidades en stock, precios, etc., junto con eventualmente algunos datos agregados (por ejemplo, valor total en stock = cantidad * precio de costo, o últimos movimientos realizados). Este requerimiento es de consulta y ayuda a los encargados a obtener detalles rápidamente.

> (También se podrían tener requerimientos adicionales como listar todos los productos fuera de stock, obtener el producto con mayor stock, etc., pero los cinco anteriores cubren las operaciones principales.)

### Tabla de Requerimientos Funcionales — Almacén de Productos

| Nombre del requisito | Descripción | Entradas | Resultados |
|---|---|---|---|
| R1 - Registrar un nuevo producto en el catálogo | Alta de un producto con código, nombre y precios. Stock inicial = 0. | Código único; nombre/descr.; precio de costo; precio de venta. | Producto agregado con stock 0; rechazo si el código ya existe. |
|R2 - Eliminar un producto del catálogo | Retirar un producto descontinuado del catálogo. | Código del producto. | Producto eliminado; sólo si stock actual es 0 (debe ajustarse antes si no). |
| R3 - Registrar entrada de stock (reabastecimiento) | Ingresar unidades al stock y registrar movimiento de entrada. | Código del producto; cantidad; fecha (o actual). | Stock incrementado; movimiento de entrada con fecha y cantidad registrado. |
| R4 - Registrar salida de stock (despacho/venta) | Descontar unidades del stock y registrar movimiento de salida. | Código del producto; cantidad; fecha (o actual). | Stock decrementado; movimiento de salida registrado; rechazo si stock insuficiente. |
| R5 - Buscar un producto por código o nombre | Consultar datos y estado de un producto. | Código exacto o parte del nombre. | Información del producto (nombre, stock, precios, etc.); opcionalmente datos agregados/últimos movimientos. |

---

## Comprensión del Mundo del Problema

En el modelo del almacén de productos identificamos tres entidades fundamentales (ver figura conceptual del inventario):

- **El almacén (clase Almacen)**: representa el sistema de inventario global. El almacén mantiene un catálogo de productos que gestiona (asociación de 1 a * con la clase Producto, podemos llamar a esta relación "productos"). Todas las operaciones de registro y consulta pasan por el almacén. Podría también mantener un registro del valor total de la mercadería o un saldo de caja, pero en este caso nos centraremos en stock físico.
- **Un producto (clase Producto)**: representa cada ítem manejado en el inventario. Tiene atributos como código, nombre, precio de costo, precio de venta y cantidad actual en stock, tal como se describió. Un Producto está asociado a un conjunto de movimientos de inventario (relación 1 a * con la clase Movimiento). Esta asociación, que podemos denominar "movimientos", representa el historial de entradas y salidas para ese producto. La cantidad actual del producto se calcula o actualiza cada vez que se agrega un movimiento.
- **Un movimiento de inventario (clase Movimiento)**: representa una transacción de entrada o salida de unidades para un producto específico. Cada Movimiento está ligado a un solo producto (multiplicidad 1 en el lado Producto, ya que un movimiento corresponde a un producto particular) y un producto puede tener muchos movimientos registrados a lo largo del tiempo (multiplicidad * en el lado Movimiento). Los atributos de Movimiento incluyen tipo (entrada/salida), fecha y cantidad de unidades. Opcionalmente podría incluir también un campo de observaciones o el origen/destino del movimiento (por ejemplo "Proveedor XYZ" en una entrada, o "Venta orden 123" en una salida), pero eso no es obligatorio en el modelo básico.

Un aspecto importante es que tanto el número de productos en el catálogo como el número de movimientos por producto son cantidades variables e indefinidas: el diseño debe soportar cualquier cantidad de productos y movimientos. Por ello, el uso de colecciones dinámicas (listas, etc.) es necesario en lugar de arreglos de tamaño fijo.

---

## Análisis y Asignación de Responsabilidades

**Requerimiento 1: Registrar un nuevo producto.** Clases involucradas: Almacen y Producto. La clase Almacen tendrá un método agregarProducto(codigo, nombre, precioCosto, precioVenta) que crea un nuevo Producto con los datos proporcionados. Antes de crearlo, verifica que el código no exista ya en su lista de productos (asegurando unicidad). El Producto nuevo se inicializa con cantidad en stock = 0 y sin movimientos registrados al inicio. Si todo es correcto, Almacen agrega el producto a su catálogo interno (e.g., su lista de productos). La clase Producto maneja sus propios datos, pero no necesita lógica especial en este momento aparte de su constructor y quizás validaciones simples (como que precios sean números positivos). La responsabilidad principal recae en Almacen para la creación y registro, mientras que Producto es una entidad pasiva que almacena la información.

**Requerimiento 2: Eliminar un producto.** Clases involucradas: Almacen y Producto. La Almacen implementará eliminarProducto(codigoProducto) que busca el producto con ese código en su lista. Si lo encuentra, podría comprobar una condición de negocio: por ejemplo, solo eliminar si producto.getCantidadActual() es 0 (para evitar eliminar productos con stock, salvo que decidamos permitirlo y asumir pérdida). Suponiendo que esté permitido (o stock en cero), el almacen quita ese producto de su catálogo (lista). Tras la eliminación, ese producto ya no estaría disponible para futuros movimientos ni consultas. La clase Producto en sí no tiene que hacer nada activamente para "eliminarse"; es simplemente removida de la colección en Almacen. (En un sistema robusto, podría haber un método en Almacen como existeProducto(codigo) para validar su existencia, usado también en otros requerimientos).

**Requerimiento 3: Registrar entrada de stock.** Clases involucradas: Almacen, Producto y Movimiento. La Almacen tendrá un método registrarEntrada(codigoProducto, cantidad, fecha) (la fecha podría tomarse del momento actual si no se pasa como parámetro). Este método localiza el Producto correspondiente al código. Luego invoca una operación en ese producto para actualizar su stock: por ejemplo, se podría llamar producto.incrementarStock(cantidad) en la clase Producto para sumar las unidades. La clase Producto será responsable de modificar su atributo de cantidad actual. Dentro de ese método, tras actualizar la cantidad, el producto podría crear un objeto Movimiento de tipo "entrada" y añadirlo a su historial. Alternativamente, la lógica de crear el movimiento puede residir en la clase Almacen: es decir, Almacen crea un nuevo Movimiento (tipo=entrada, fecha, cantidad) y luego llama a un método producto.agregarMovimiento(nuevoMovimiento). De cualquier forma, se debe agregar el movimiento a la lista de movimientos de ese producto. La responsabilidad de asegurar que la cantidad sea positiva y consistente recae en Almacen (por validar el parámetro) y en Producto (por integrar correctamente el cambio). Tras esta operación, el producto tendrá su cantidadActual incrementada y un registro añadido en su historial de movimientos.

**Requerimiento 4: Registrar salida de stock.** Clases involucradas: Almacen, Producto y Movimiento. La Almacen ofrecerá un método registrarSalida(codigoProducto, cantidad, fecha) para descontar unidades. Encuentra el Producto correspondiente y, antes de realizar cualquier cambio, verifica que producto.getCantidadActual() sea mayor o igual a la cantidad solicitada. Si la cantidad en stock es insuficiente, el método de Almacen no efectúa el movimiento y podría devolver un error o excepción indicando "stock insuficiente". Si hay disponibilidad, entonces Almacen procede. Puede llamar un método en Producto, por ejemplo producto.decrementarStock(cantidad), que internamente resta la cantidad y actualiza el atributo de stock. Al igual que con la entrada, se creará un objeto Movimiento de tipo "salida". Dependiendo de la implementación, esto lo hace la clase Producto dentro de decrementarStock o lo hace Almacen externamente. Supongamos que Producto se encarga: dentro de decrementarStock(cantidad), después de restar, crea un Movimiento de salida con la fecha indicada y la cantidad, y lo añade a su lista de movimientos (movimientos.add(nuevoMovimiento)). La clase Movimiento simplemente almacena los detalles de la transacción. Es responsabilidad de Producto (o Almacen) garantizar que no se reste más de lo que tenía (por eso la verificación previa). Después de la operación, la cantidadActual del producto se habrá reducido y su historial contendrá el nuevo movimiento de salida.

**Requerimiento 5: Buscar un producto por código o nombre.** Clases involucradas: Almacen y Producto (y eventualmente Movimiento). La Almacen implementará buscarProducto(criterio) donde el criterio puede ser un código exacto o un texto para coincidir con el nombre. Este método recorre su catálogo de Producto para encontrar aquel que cumpla el criterio (por ejemplo, si el criterio parece un código exacto, compara con producto.getCodigo(), o si es texto parcial, busca en producto.getNombre()). Una vez localizado el producto (o productos, si la búsqueda devuelve varios resultados por nombre similar), la Almacen retornará la información. En términos de la aplicación, podría devolver el objeto Producto encontrado o crear un resumen de datos. La clase Producto proporciona sus métodos getters para obtener sus atributos (nombre, stock, precios). Si se quiere mostrar algo del historial, podría también acceder a producto.getMovimientos() para listar los últimos movimientos del producto. Sin embargo, típicamente este requerimiento se enfoca en los datos del producto mismo; los movimientos se podrían consultar en otra operación (no listada explícitamente, pero podría existir "consultar historial de movimientos de un producto"). En síntesis, Almacen realiza la búsqueda, y Producto facilita sus datos. No hay cambios de estado aquí, solo lectura.

## Diagrama de clases
![Diagrama de clases - Almacén de productos](/imagenes/almacen.drawio.svg)