# Taller — **KioskoCafé: Menú y Carrito** (Repaso 90′)

## Contexto y objetivo
Este taller es de **repaso** para el examen de **POO**:
- **Clases, atributos, métodos y _type hints_**  
- **Listas, tuplas, diccionarios**  
- **List & dict comprehension**  
- **Dataclasses**

## Instrucciones
- Lee el enunciado y completa el **starter** que se incluye al final.
- **No implementes funcionalidades extra** fuera de lo pedido.
- Mantén el **tipado** en todo y respeta las **restricciones**.

---

## Enunciado
Se desea un módulo sencillo para administrar el **menú** de un kiosko de café (bebidas y snacks) y un **carrito** de compras. Debes proveer:

- **`Bebida` (dataclass)**  
  Campos: `id: int`, `nombre: str`, `precio: float`, `etiquetas: list[str]` (cada instancia con su propia lista).  
  Validaciones en `__post_init__`:  
  - `nombre` no vacío (usar `.strip()`),  
  - `precio > 0`,  
  - normalizar `etiquetas`: `.strip()`, a **minúsculas**, y **descartar** vacías.  
  **Método adicional**: `precio_con_descuento(pct: float) -> float` (validar `0 ≤ pct ≤ 100` y aplicar `precio * (1 - pct/100)`).

- **`Snack` (dataclass)**  
  Campos: `id: int`, `nombre: str`, `precio: float`.  
  Validaciones en `__post_init__`: `nombre` no vacío y `precio > 0`.

- **`Menu` (clase normal, sin herencia)**  
  Atributos públicos: `bebidas: list[Bebida]`, `snacks: list[Snack]`.  
  Métodos:
  - `__init__()` (inicializa colecciones).
  - `agregar_bebida(b: Bebida) -> None` (rechazar **id duplicado**, sin `any()`).
  - `buscar_por_etiqueta(tag: str) -> list[Bebida]` (**case-insensitive**, usar **list comprehension**).
  - `mapa_precios() -> dict[str, float]` (unir `{nombre: precio}` de bebidas y snacks con **dict comprehension**).

- **`Carrito` (clase normal)**  
  **Constructor**: `__init__(cliente: str)` (normalizar y validar `cliente`, crear `items: dict[int, int]` vacío).  
  Método: `total(menu: Menu) -> float` (recorre `items`, busca precios en el `Menu` y suma `precio * cantidad`).

## Restricciones (idénticas al estilo del curso) 
- **Atributos públicos** y **sin herencia**.  
- El **starter** incluye exactamente **10 TODOs**. Implementa **solo** lo que se pide ahí.

---

## Starter (completa los TODOs)

```python
# starter_kiosko_cafe.py
# ============================================================
# Ejercicio: KioskoCafé — Menú y Carrito
# Objetivo:
#   - Practicar dataclasses, type hints, list/dict comprehensions
#   - 4 clases (2 dataclasses), constructor en Carrito y método extra en Bebida
# Estilo y restricciones:
#   - Sin herencia, atributos públicos
#   - No usar any() ni enumerate()
#   - Import único: dataclasses
#   - Python 3.9+ (list[str], dict[str, float], tuple[...])
# ============================================================

from dataclasses import dataclass, field

# ------------------------------------------------------------
# TODO 1: Implementar la dataclass 'Bebida'
#   Campos:
#     - id: int
#     - nombre: str
#     - precio: float
#     - etiquetas: list[str]  -> usar field(default_factory=list) (lista propia por instancia)
# ------------------------------------------------------------
# TODO 2: En 'Bebida', implementar __post_init__ con validaciones:
#   - nombre no vacío (usar .strip())
#   - precio > 0
#   - normalizar etiquetas: .strip(), a minúsculas, descartar vacías; dejar lista final en self.etiquetas
# ------------------------------------------------------------
# TODO 3: En 'Bebida', declarar el método:
#   def precio_con_descuento(self, pct: float) -> float:
#     - pct en [0, 100]; validar rango
#     - retornar precio * (1 - pct/100)
#   (Solo declarar la firma dentro de la clase y dejar el cuerpo para implementar)
# ------------------------------------------------------------

# Pega tu implementación de 'Bebida' aquí ↓
# (no elimines esta línea)
# ============================================================




# ============================================================

# ------------------------------------------------------------
# TODO 4: Implementar la dataclass 'Snack'
#   Campos:
#     - id: int
#     - nombre: str
#     - precio: float
# ------------------------------------------------------------
# TODO 5: En 'Snack', implementar __post_init__ con validaciones:
#   - nombre no vacío (strip)
#   - precio > 0
# ------------------------------------------------------------

# Pega tu implementación de 'Snack' aquí ↓
# (no elimines esta línea)
# ============================================================




# ============================================================

class Menu:
    """
    Mantiene colecciones de bebidas y snacks. Métodos de alta y consultas.
    Atributos públicos:
      - bebidas: list[Bebida]
      - snacks:  list[Snack]
    """
    # --------------------------------------------------------
    # TODO 6: Implementar __init__(self) -> None
    #   - Inicializar self.bebidas: list[Bebida] = []
    #   - Inicializar self.snacks:  list[Snack] = []
    # --------------------------------------------------------
    def __init__(self) -> None:
        pass

    # --------------------------------------------------------
    # TODO 7: Implementar agregar_bebida(self, b: 'Bebida') -> None
    #   - Rechazar id duplicado (no usar any())
    #   - Recorrer con for clásico; si duplicado -> raise ValueError(f"ID de bebida duplicado: {b.id}")
    #   - En caso contrario, append
    # --------------------------------------------------------
    def agregar_bebida(self, b: 'Bebida') -> None:
        pass

    # --------------------------------------------------------
    # TODO 8: Implementar buscar_por_etiqueta(self, tag: str) -> list['Bebida']
    #   - Normalizar tag: tag = tag.strip().lower()
    #   - Usar list comprehension para retornar bebidas que contengan la etiqueta
    # --------------------------------------------------------
    def buscar_por_etiqueta(self, tag: str) -> list['Bebida']:
        pass

    # --------------------------------------------------------
    # TODO 9: Implementar mapa_precios(self) -> dict[str, float]
    #   - Devolver {nombre: precio} de TODO el menú:
    #       * bebidas   -> (b.nombre: b.precio)
    #       * snacks    -> (s.nombre: s.precio)
    #   - Usar dict comprehension (puedes construir por partes y combinar)
    # --------------------------------------------------------
    def mapa_precios(self) -> dict[str, float]:
        pass


class Carrito:
    """
    Representa un carrito básico asociado a un cliente.
    Debe permitir calcular el total consultando el Menu.
    - items: dict[int, int] (id_producto -> cantidad)
    """
    # --------------------------------------------------------
    # TODO 10: Implementar __init__(self, cliente: str) -> None
    #   - Guardar 'cliente' (str normalizado con .strip(), no vacío)
    #   - Inicializar 'items' como dict[int, int] vacío
    # --------------------------------------------------------
    def __init__(self, cliente: str) -> None:
        pass

    def total(self, menu: Menu) -> float:
        """
        Firma para referencia:
        - Recorre self.items y busca el precio en el menú (bebidas o snacks).
        - Suma precio * cantidad.
        - Maneja ids inexistentes según criterio (ignorar o lanzar error).
        """
        pass


# ------------------------------------------------------------
# DEMO RÁPIDA (opcional; deja comentada y úsala tras completar TODOs)
# ------------------------------------------------------------
print("[KioskoCafé] Pruebas mínimas")

## Instancias base
#menu = Menu()

#b1 = Bebida(1, "Americano", 6000.0, ["Café", "  Caliente "])
#b2 = Bebida(2, "Latte", 8000.0, ["café", "leche"])
#s1 = Snack(101, "Galleta choco", 3500.0)
#s2 = Snack(102, "Brownie", 5000.0)

#menu.agregar_bebida(b1)
#menu.agregar_bebida(b2)
#menu.snacks.append(s1)
#menu.snacks.append(s2)

#print("Bebida.precio_con_descuento (10%):", b2.precio_con_descuento(10.0))
#print("Buscar por etiqueta 'CAFÉ':", [b.nombre for b in menu.buscar_por_etiqueta("  CAFÉ ")])

#mp = menu.mapa_precios()
#print("Mapa de precios (muestra):", dict(list(mp.items())[:4]))

#carrito = Carrito("Ana")
#carrito.items = {1: 2, 102: 1}  # 2 Americanos + 1 Brownie
#print("Total carrito:", carrito.total(menu))

#print("Todo OK (demo completada)")
```
